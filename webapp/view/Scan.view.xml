<mvc:View
    xmlns:unified="sap.ui.unified"
    xmlns:form="sap.ui.layout.form"
    xmlns:mvc="sap.ui.core.mvc"
    xmlns:f="sap.f"
    xmlns:card="sap.f.cards"
    xmlns="sap.m"
    xmlns:ndc="sap.ndc"
    displayBlock="true"
    xmlns:layout="sap.ui.layout"
    controllerName="webapp.controller.Scan"
>
    <Page
        id="page"
        title="{i18n>title}"
        showHeader="false"
    >
        <content>
            <!-- <FlexBox width="100%"
                direction="Column"
                height="100%"
                justifyContent="Center"
                alignItems="Center">
                <VBox alignContent="Center"
                    alignItems="Center"
                    gap="1rem">
                    <VBox >
                        <Label design="Bold"
                            text="{i18n>ddt}:" />
                        <Input id="barcodeScannerInput"
                            type="Text"
                            change=".onBarcodeInputChange"
                            value="{/code}"
                            valueHelpRequest="openScannerForInput('barcodeScannerInputCallback')"
                            valueHelpIconSrc="sap-icon://bar-code"
                            showValueHelp="true"
                            />
                            
                    </VBox>
                </VBox>Tiny          <f:Card class="sapUiMediumMarginTop"
                    visible="true"
                    headerPosition="Top">
                    <f:header>
                        <card:Header iconSrc="sap-icon://shipping-status"
                            title="{i18n>consegna}: {/form/ddt}"
                            iconBackgroundColor="Accent6"
                            statusText="{i18n>data}: {/form/date}" />
                    </f:header>
                    <f:content>
                        <FlexBox width="100%"
                            direction="Row"
                            height="100%"
                            justifyContent="Center"
                            alignItems="Start">
                            <VBox justifyContent="SpaceBetween"
                                class="sapUiSmallMargin">
                                <VBox alignContent="SpaceBetween"
                                    alignItems="Start">
                                    <VBox class="sapUiSmallMarginBottom">
                                        <Label class="sapUiTinyMarginEnd"
                                            design="Bold"
                                            text="{i18n>cliente}:" />
                                        <Text text="{/form/customer}" />
                                    </VBox>
                                    <VBox class="sapUiSmallMarginBottom">
                                        <Label class="sapUiTinyMarginEnd"
                                            design="Bold"
                                            text="{i18n>destinazione}:" />
                                        <Text text="{/form/destination}" />
                                    </VBox>
                                </VBox>
                                <Image src="{/form/foto/src}"
                                    width="20rem"
                                    height="auto"
                                    class="sapUiSmallMargin">
                                    <detailBox>
                                        <LightBox>
                                            <LightBoxItem imageSrc="{/form/foto/src}"
                                                alt="Beamer"
                                                title="{/form/foto/name}"
                                                subtitle="{i18n>lastUpload}: {/form/foto/last_upload}" />
                                        </LightBox>
                                    </detailBox>
                                </Image>
                                <VBox>
                                    <Label design="Bold"
                                        text="{i18n>foto}:" />
                                    <unified:FileUploader width="100%"
                                        value="{/form/foto/name}"
                                        buttonText="{i18n>sostituisci}"
                                        style="Emphasized" />
                                </VBox>
                            </VBox>
                        </FlexBox>
                    </f:content>
                </f:Card>
            </FlexBox> -->
            <FlexBox
                direction="Column"
                width="100%"
                height="100%"
                justifyContent="Start"
                alignItems="Center"
                class="sapUiMediumMarginTop"
            >
                <layout:Grid
                    defaultSpan="L12 M12 S12"
                    hSpacing="1"
                    vSpacing="1"
                    width="100%"
                >
                    <Input
                        id="barcodeScannerInput"
                        type="Text"
                        value="{scanModel>/code}"
                        change=".onBarcodeInputChange"
                        valueHelpRequest="openScannerForInput('barcodeScannerInputCallback')"
                        valueHelpIconSrc="sap-icon://bar-code"
                        showValueHelp="true"
                        placeholder="{i18n>insertDeliveryNumber}"
                        width="100%"
                    >
                        <layoutData>
                            <layout:GridData span="L10 M9 S12" />
                        </layoutData>
                    </Input>

                    <Button
                        icon="sap-icon://search"
                        press=".onManualSearch"
                        width="100%"
                        type="Emphasized"
                        tooltip="{i18n>search}"
                    >
                        <layoutData>
                            <layout:GridData span="L2 M3 S12" />
                        </layoutData>
                    </Button>
                </layout:Grid>

                <!-- Card con dati consegna -->
                <f:Card
                    class="sapUiMediumMarginTop"
                    width="100%"
                    headerPosition="Top"
                >
                    <f:header>
                        <card:Header
                            iconSrc="sap-icon://shipping-status"
                            title="{i18n>consegna}: {scanModel>/form/ddt}"
                            iconBackgroundColor="Accent6"
                            
                        />
                    </f:header>
                    <f:content>
                        <VBox
                            width="100%"
                            class="sapUiMediumMargin"
                            justifyContent="Start"
                            alignItems="Stretch"
                        >
                            <Label
                                design="Bold"
                                text="{i18n>data}:"
                            />
                            <Text
                                text="{path: 'scanModel>/form/date', formatter: '.formatter.formatDate'}"
                                class="sapUiTinyMarginBottom"
                            />
                            <Label
                                design="Bold"
                                text="{i18n>cliente}:"
                            />
                            <Text
                                text="{scanModel>/form/customer}"
                                class="sapUiTinyMarginBottom"
                            />

                            <Label
                                design="Bold"
                                text="{i18n>destinazione}:"
                            />
                            <Text
                                text="{scanModel>/form/destination}"
                                class="sapUiTinyMarginBottom"
                            />

                            <Image
                                src="{scanModel>/form/foto/src}"
                                width="100%"
                                height="auto"
                                class="sapUiSmallMarginBottom"
                            >
                                <detailBox>
                                    <LightBox>
                                        <LightBoxItem
                                            imageSrc="{scanModel>/form/foto/src}"
                                            alt="{scanModel>/form/foto/name}"
                                            title="{scanModel>/form/foto/name}"
                                            subtitle="{i18n>lastUpload}: {scanModel>/form/foto/last_upload}"
                                        />
                                    </LightBox>
                                </detailBox>
                            </Image>

                            <Label
                                design="Bold"
                                text="{i18n>foto}:"
                            />
                            <unified:FileUploader
                                width="100%"
                                value="{scanModel>/form/foto/name}"
                                buttonText="{i18n>sostituisci}"
                                style="Emphasized"
                            />
                        </VBox>
                    </f:content>
                </f:Card>
            </FlexBox>
        </content>
    </Page>
</mvc:View>
